Here's the FSM implementation in VHDL language.
Some useful .do files are provided to make the ModelSim simulation easier and quicker.